---
import { IExperiences } from "@types";

const { title, details } = Astro.props as IExperiences;
---

<section
	class="flex items-start justify-between flex-col lg:flex-row text-gray-800 dark:text-gray-200 my-10"
>
	<h2
		class="w-full lg:w-[15rem] mb-8 lg:mb-0 text-2xl font-semibold text-gray-800 dark:text-gray-100 fade-in-up"
	>
		{title}
	</h2>
	<div class="w-full lg:flex-1 relative">
		<!-- Timeline connector line -->
		<div class="absolute left-0 top-2 bottom-2 w-0.5 bg-gradient-to-b from-blue-400 via-purple-500 to-pink-400 rounded-full hidden lg:block" aria-hidden="true"></div>
		
		{
			details.map((item, index) => (
				<div class={`mb-10 last:mb-0 lg:pl-8 relative fade-in-up stagger-${Math.min(index + 1, 6)}`}>
					<!-- Timeline dot -->
					<div class="timeline-dot absolute -left-[5px] top-2 hidden lg:block" aria-hidden="true"></div>
					
					<div class="space-y-4">
						<div class="flex justify-between items-start flex-col sm:flex-row gap-3">
							<div class="flex-1">
								<h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 font-outfit leading-tight">
									{item.name}
								</h3>
								<p class="text-blue-500 dark:text-blue-400 font-medium mt-1">
									{item.location}
								</p>
							</div>
							<div class="flex items-center text-sm text-gray-600 dark:text-gray-400 font-medium bg-gray-100 dark:bg-gray-700 px-3 py-1.5 rounded-full">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									width="14"
									height="14"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="mr-2"
									aria-hidden="true"
								>
									<rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
									<line x1="16" y1="2" x2="16" y2="6" />
									<line x1="8" y1="2" x2="8" y2="6" />
									<line x1="3" y1="10" x2="21" y2="10" />
								</svg>
								<span class="whitespace-nowrap">
									{item.startDate} - {item.endDate}
								</span>
							</div>
						</div>

						<ul class="space-y-2.5 mt-4">
							{item.description.map((desc) => (
								<li class="text-gray-600 dark:text-gray-300 flex items-start leading-relaxed">
									<span class="text-blue-500 dark:text-blue-400 mr-3 mt-1.5 text-xs flex-shrink-0">
										‚óè
									</span>
									<span class="flex-1">{desc.replace(/^-\s*/, "")}</span>
								</li>
							))}
						</ul>

						{/* Skills section for each job */}
						{item.skills && item.skills.length > 0 && (
							<div class="mt-5">
								<h4 class="text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2.5 uppercase tracking-wider">
									Key Technologies
								</h4>
								<div class="flex flex-wrap gap-2">
									{item.skills.map((skill) => (
										<span class="px-2.5 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 text-xs font-medium rounded-full border border-blue-200 dark:border-blue-700">
											{skill}
										</span>
									))}
								</div>
							</div>
						)}
					</div>
				</div>
			))
		}
	</div>
</section>


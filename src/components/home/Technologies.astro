---
import type { ITechnologies } from "@types";

const { title, technologies } = Astro.props as ITechnologies;

// Group technologies by category based on their position in the array
const groupedTechnologies = {
	Languages: technologies.slice(0, 3),
	Frameworks: technologies.slice(3, 9),
	"Databases & Caching": technologies.slice(9, 15),
	"Artificial Intelligence": technologies.slice(15, 21),
	"Cloud & Infrastructure": technologies.slice(21, 27),
	"Monitoring & CI/CD": technologies.slice(27),
};
---

<section class="mb-10" aria-labelledby="technologies-title">
	<h2
		id="technologies-title"
		class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-6 fade-in-up"
	>
		{title}
	</h2>

	<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
		{
			Object.entries(groupedTechnologies).map(([category, techs], catIndex) => (
				<div class={`glass-card rounded-xl p-6 hover:shadow-lg transition-all duration-300 fade-in-up stagger-${Math.min(catIndex + 1, 6)}`}>
					<h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 font-outfit flex items-center">
						<span class="w-3 h-3 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full mr-3" />
						{category}
					</h3>
					<div class="grid grid-cols-2 gap-4">
						{techs.map((tech) => (
							<div
								class="tech-icon-card flex flex-col items-center p-3 rounded-lg bg-white/50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-600 group"
								role="listitem"
								aria-label={tech.name}
							>
								{
									tech.icon.endsWith(".svg") ? (
										<img
											src={tech.icon}
											alt={`${tech.name} icon`}
											class="w-8 h-8 mb-2 dark:invert opacity-80 transition-all duration-300"
										/>
									) : (
										<i
											class={`text-3xl ${tech.icon} text-gray-700 dark:text-gray-200 mb-2 transition-colors duration-300`}
											aria-hidden="true"
										/>
									)
								}
								<span class="text-xs font-medium text-center text-gray-700 dark:text-gray-200 leading-tight">
									{tech.name}
								</span>
							</div>
						))}
					</div>
				</div>
			))
		}
	</div>
</section>
